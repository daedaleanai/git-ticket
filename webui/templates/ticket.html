<!DOCTYPE html>
<html>

<head>
<title>git-ticket | {{ .Id }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<style>
.card {
    width: 800px;
    margin: 32px auto;
}
</style>
</head>

<body>
    <div class="card">
        <div class="card-header text-center">
            <h5 class="card-title">{{ .Title }}</h5>
        </div>
        <div class="card-body">
            <table class="table">
                <tr>
                    <td><b>Status</b></td>
                    <td><span class="badge {{ ticketStatusColor .Status }}" >{{ .Status }}</span></td>
                </tr>

                <tr>
                    <td><b>Author</b></td>
                    <td>{{ .Author.DisplayName }}</td>
                </tr>

                <tr>
                    <td><b>Assignee</b></td>
                    <td>{{ .Assignee.DisplayName }}</td>
                </tr>

                <tr>
                    <td><b>Workflow</b></td>
                    <td><span class="badge bg-secondary">{{ workflow . }}</span></td>
                </tr>

                <tr>
                    <td><b>CCB</b></td>
                    <td>
                    {{ range .Ccb }}
                        <span class="badge {{ ccbStateColor .State }}">{{ .Status }}</span>&nbsp;{{ .User.DisplayName }}<br>
                    {{ end }}
                    </td>
                </tr>

                <tr>
                    <td><b>Reviews</b></td>
                    <td>
                    {{ range .Reviews }}
                        <span class="badge {{ reviewStatusColor .LatestOverallStatus }}">{{ .Id }}</span><br>
                    {{ end }}
                    </td>
                </tr>

                <tr>
                    <td><b>Checklists</b></td>
                    <td>
                    {{ range $k, $v := .GetChecklistCompoundStates }}
                        <span class="badge {{ checklistStateColor $v }}">{{ checklist $k }}</span>
                    {{ end }}
                    </td>
                <tr>

                <tr>
                    <td><b>Labels</b></td>
                    <td>
                    {{ range .Labels }}
                        {{ if and (not .IsWorkflow) (not .IsChecklist) }}
                            <span class="badge bg-secondary">{{ . }}</span>
                        {{ end }}
                    {{ end }}
                    </td>
                </tr>

                <tr>
                    <td><b>Actors</b></td>
                    <td>
                    {{ range .Actors }}
                        {{ .DisplayName }}<br>
                    {{ end }}
                    </td>
                </tr>

                <tr>
                    <td><b>Participants</b></td>
                    <td>
                        {{ range .Participants }}
                            {{ .DisplayName }}<br>
                        {{ end }}
                    </td>
                </tr>
            </table>
            {{ range .Comments }}
            <p>
                <b>{{ .Author.DisplayName }}</b></br>
                {{ comment .Message }}
            </p>
            {{ end }}
        </div>
    </div>
</body>

</html>
